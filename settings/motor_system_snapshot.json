{
    "system_name": "Mirror Body Animations - 32 Servo Motor System",
    "snapshot_date": "2025-12-12T15:12:47+05:30",
    "version": "1.0.0-stable",
    "status": "WORKING",
    "hardware": {
        "esp32": {
            "chip": "ESP32-S3 (QFN56)",
            "revision": "v0.2",
            "features": "WiFi, BLE, Embedded PSRAM 8MB (AP_3v3)",
            "mac_address": "dc:b4:d9:05:27:24",
            "flash_size": "8MB"
        },
        "servos": {
            "total_count": 32,
            "pca9685_boards": 2,
            "board_1": {
                "i2c_address": "0x40",
                "channels": "0-15",
                "servos": 16
            },
            "board_2": {
                "i2c_address": "0x41",
                "channels": "16-31",
                "servos": 16
            }
        },
        "leds": {
            "total_count": 2048,
            "panels": 2,
            "panel_left": {
                "pin": 5,
                "count": 1024
            },
            "panel_right": {
                "pin": 18,
                "count": 1024
            }
        }
    },
    "communication": {
        "serial": {
            "port": "COM5",
            "baud_rate": 460800,
            "timeout": 1,
            "protocol": "custom_binary",
            "upload_speed": 921600
        },
        "packets": {
            "led_packet": {
                "header": "0xAA 0xBB",
                "type": "0x01",
                "size": 2051,
                "data_bytes": 2048
            },
            "servo_packet": {
                "header": "0xAA 0xBB",
                "type": "0x02",
                "size": 67,
                "data_bytes": 64,
                "servos": 32,
                "bytes_per_servo": 2
            }
        }
    },
    "firmware": {
        "file": "mirror-prod-animation_esp32.ino",
        "platform": "espressif32",
        "framework": "arduino",
        "board": "esp32-s3-devkitc-1",
        "compiled_size_bytes": 778000,
        "flash_usage_percent": 23.3,
        "ram_usage_percent": 17.7,
        "critical_settings": {
            "watchdog_core0": "DISABLED",
            "watchdog_core1": "DISABLED",
            "serial_buffer_overflow_protection": "ENABLED",
            "max_serial_buffer": 3000
        }
    },
    "python": {
        "entry_point": "apps.gui.main",
        "motor_controller": {
            "class": "MotorController",
            "num_servos": 32,
            "angle_min": 0,
            "angle_max": 180,
            "packet_format": "big_endian"
        },
        "serial_manager": {
            "class": "SerialManager",
            "defensive_mode": "ENABLED",
            "is_open_check": true,
            "oserror_handling": true,
            "reconnect_on_fail": true
        },
        "mediapipe": {
            "model_complexity": 0,
            "min_detection_confidence": 0.7,
            "min_tracking_confidence": 0.8,
            "enable_segmentation": true,
            "smooth_landmarks": false
        }
    },
    "libraries": {
        "esp32": {
            "FastLED": "3.10.3",
            "Adafruit_PWM_Servo_Driver_Library": "3.0.2",
            "ArduinoOTA": "2.0.0",
            "ESPmDNS": "2.0.0",
            "WiFi": "2.0.0",
            "Wire": "2.0.0"
        },
        "python": {
            "opencv-python": ">=4.5.0",
            "mediapipe": ">=0.10.0",
            "pyserial": ">=3.5",
            "numpy": ">=1.20.0"
        }
    },
    "motor_configuration": {
        "servo_settings": {
            "frequency_hz": 50,
            "oscillator_frequency": 27000000,
            "pwm_min": 250,
            "pwm_max": 470,
            "smooth_alpha": 0.3
        },
        "tracking": {
            "algorithm": "human_x_position_to_angle",
            "input_range": [
                0.0,
                1.0
            ],
            "output_range": [
                0,
                180
            ],
            "rate_limiting": true,
            "min_send_interval_ms": 50,
            "max_fps": 20
        }
    },
    "known_issues_fixed": [
        "ESP32 watchdog timer crash - FIXED by disabling watchdog",
        "Serial buffer overflow - FIXED with 3000 byte limit",
        "Python serial write crash - FIXED with defensive is_open checks",
        "Only 6 servos working - FIXED by expanding to 32 servos with dual PCA9685",
        "Half-screen detection - FIXED by using full frame with resize display"
    ],
    "restore_instructions": {
        "firmware": [
            "1. Connect ESP32-S3 to COM5",
            "2. cd firmware/esp32",
            "3. python -m platformio run --target upload --upload-port COM5",
            "4. Wait for 'SUCCESS' message"
        ],
        "python": [
            "1. Ensure all dependencies installed: pip install -r requirements.txt",
            "2. Run: python -m apps.gui.main --fast",
            "3. Press 'M' for MOTOR mode"
        ],
        "hardware": [
            "1. Verify PCA9685 board 1 at address 0x40",
            "2. Verify PCA9685 board 2 at address 0x41 (solder A0 jumper)",
            "3. Connect all 32 servos across both boards",
            "4. Ensure power supply adequate for 32 servos"
        ]
    }
}